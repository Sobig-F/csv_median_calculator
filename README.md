# CSV Median Calculator v1.0.0

[![C++23](https://img.shields.io/badge/C%2B%2B-23-blue.svg)](https://isocpp.org/std/status)
[![Boost](https://img.shields.io/badge/Boost-1.84-green.svg)](https://www.boost.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –º–µ–¥–∏–∞–Ω—ã –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤—ã—Ö CSV –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ memory-mapped files.

## üìã –û –ø—Ä–æ–µ–∫—Ç–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–µ–¥–∏–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ü–µ–Ω –∏–∑ CSV —Ñ–∞–π–ª–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º T-Digest –¥–ª—è —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –∫–≤–∞–Ω—Ç–∏–ª–µ–π —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚ö° **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** ‚Äî –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª —á–∏—Ç–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
- üìä **T-Digest –∞–ª–≥–æ—Ä–∏—Ç–º** ‚Äî —Ç–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –º–µ–¥–∏–∞–Ω—ã, mean, p90, p95 –∏ p99 —Å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–π –ø–∞–º—è—Ç—å—é
- üîÑ **–†–µ–∂–∏–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ñ–∞–π–ª–∞—Ö "–Ω–∞ –ª–µ—Ç—É"
- üíæ **Memory-mapped files** ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- üéØ **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞** ‚Äî —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ–¥–∏–∞–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- CMake 3.23 –∏–ª–∏ –≤—ã—à–µ
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C++23 (MSVC 2022, GCC 13+, Clang 16+)
- Git (–¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

### –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
`git clone https://github.com/Sobig-F/csv_median_calculator.git`

`cd csv_median_calculator`

`mkdir build && cd build`

`cmake ..`

`cmake --build . --config Release`

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
**–ë–∞–∑–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞**
```bash
Allowed options:
  --help                      Show this help message
  --config arg (=config.toml) Path to configuration file (can use -config, -cfg
                              or -cfg=FILE)
  --streaming-mode            Enable streaming mode (flag, no arguments needed)
  --mean                      Enable mean value calculate
  --p90                       Enable p90 quantile calculate
  --p95                       Enable p95 quantile calculate
  --p99                       Enable p99 quantile calculate
```
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª (`config.toml`)**
```toml
[main]
input = "examples/input"            # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –≤—Ö–æ–¥–Ω—ã–º–∏ CSV —Ñ–∞–π–ª–∞–º–∏
output = "examples/output"          # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
filename_mask = ["trade", "price"]  # –ú–∞—Å–∫–∞ –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```
### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
**–§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

CSV —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å `;` –∏ –≤–∫–ª—é—á–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏:
```js
receive_ts;exchange_ts;price;quantity;side
1771189878289859;1771189878289851;68479.74497469;0.04630881;bid
```
### –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
**–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ output/median.csv:**
```js
timestamp;median
1771189878289859;68479.74497469
1771189878289862;68480.12345678
```
## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ   CSV File  ‚îÇ ‚Üí  ‚îÇ  CSV Reader  ‚îÇ ‚Üí  ‚îÇ Data Queue  ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                     ‚Üì
       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ median.csv  ‚îÇ ‚Üê  ‚îÇ File Streamer‚îÇ ‚Üê  ‚îÇ   T-Digest  ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```
## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ
**–û–°:** Windows (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π UTF-8 –∫–æ–Ω—Å–æ–ª–∏)

**–û–ó–£:** –æ—Ç 256 –ú–ë (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤)

**–î–∏—Å–∫:** –æ—Ç 50 –ú–ë —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
#### –û–±—Ä–∞–±–æ—Ç–∫–∞
\>1 –º–ª–Ω —Å—Ç—Ä–æ–∫/—Å–µ–∫ (–Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º SSD)

#### –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
\<50 –ú–ë –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

#### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–∏–≥–∞–±–∞–π—Ç

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
1) –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

2) –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É (git checkout -b feature/amazing-feature)

3) –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (git commit -m 'Add amazing feature')

4) –ó–∞–ø—É—à—å—Ç–µ –≤–µ—Ç–∫—É (git push origin feature/amazing-feature)

5) –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
- MIT License. –°–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## ‚úâÔ∏è –ö–æ–Ω—Ç–∞–∫—Ç—ã
- –ê–≤—Ç–æ—Ä: github: Sobig-F

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
*`Boost C++ Libraries`*

*`spdlog`* ‚Äî –±—ã—Å—Ç—Ä—ã–π –ª–æ–≥–≥–µ—Ä

*`toml++`* ‚Äî –ø–∞—Ä—Å–µ—Ä TOML

*`T-Digest`* ‚Äî –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –∫–≤–∞–Ω—Ç–∏–ª–µ–π